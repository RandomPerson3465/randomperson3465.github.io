let saveInterval,cmm=0,raw=0,m="100b",graphData=[];const uuidGen=function(){let e=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()};let user=localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):{name:"Loading",image:"../default.png",footer:"Subscribers",count:0,min_gain:0,max_gain:0,updateInterval:2e3,graphType:"live",graphDates:[],graphValues:[],liveGraph:[],maxPoints:100,dropdownTopText:"All Time",dropdownBottomText:"Live Data",id:uuidGen(),autosave:!0,banner:"",textColor:"#000",odometerUp:"#000",odometerDown:"#000",odometerSpeed:2,graphColor:"#000",boxColor:"#000",bgColor:"#1a1a20",mean_gain:0,std_gain:0,abbreviate:!1};if(user.count||(user.count=user.subscribers),"live"==user.graphType)graphData=user.liveGraph;else if("set"==user.graphType){let e=[];for(let o=0;o<user.graphDates.length;o++)e.push([new Date(user.graphDates[o]).getTime(),user.graphValues[o]]);graphData=e}function spl(e){return(e=""+e).split("",12)}const chart=new Highcharts.chart({chart:{renderTo:"chart",type:"line",zoomType:"x",backgroundColor:"transparent",plotBorderColor:"transparent",style:{fontFamily:"Roboto"},height:"16.875%",spacingLeft:-10,spacingLeft:-10,marginRight:65},title:{text:""},xAxis:{type:"datetime",tickPixelInterval:500,labels:{style:{color:"#AAAAAA"},formatter:function(){return Highcharts.dateFormat("%b %e, %Y",this.value)}},gridLineColor:"#9E9E9E",lineColor:"#9E9E9E",minorGridLineColor:"#858585",tickColor:"#858585",title:{style:{color:"#858585"}}},yAxis:{title:{text:""},labels:{style:{color:"#AAAAAA",fontSize:"12px"},formatter:function(){return abb(this.value)}},gridLineColor:"#3D3D3D",lineColor:"#3D3D3D",minorGridLineColor:"#3D3D3D",tickColor:"#3D3D3D",opposite:!0},credits:{enabled:!1},series:[{showInLegend:!1,name:"Subscribers",marker:{enabled:!1},color:"#3FABCD",lineColor:"#3FABCD",lineWidth:2,data:graphData}]});function abb(e){if(0===e)return"0";const o=["","K","M","B"],t=e<0,n=Math.abs(e),l=0===n?0:Math.floor(Math.log10(n)/3);let a=(n/Math.pow(1e3,l)).toFixed(2).toString();a+=o[l],t&&(a=`-${a}`);const r=a.split(".");return r[1]&&r[1].length>1&&(a=r[0]+"."+r[1][0],a+=o[l],t&&(a=`-${a}`)),a}function settype(e){return e<1e12&&(m="100b",document.querySelector("#odo1a").style.display="inline-block",document.querySelector("#odo2a").style.display="inline-block",document.querySelector("#odo3a").style.display="inline-block",document.querySelector("#odo4a").style.display="inline-block",document.querySelector("#odo5a").style.display="inline-block",document.querySelector("#odo6a").style.display="inline-block",document.querySelector("#odo7a").style.display="inline-block",document.querySelector("#odo8a").style.display="inline-block",document.querySelector("#odo9a").style.display="inline-block",document.querySelector("#odo10a").style.display="inline-block",document.querySelector("#odo11a").style.display="inline-block",document.querySelector("#odo12a").style.display="inline-block",document.querySelector("#comma1a").style.display="inline-block",document.querySelector("#comma2a").style.display="inline-block",document.querySelector("#comma3a").style.display="inline-block"),e<1e11&&(m="10b",document.querySelector("#odo1a").style.display="none",document.querySelector("#odo2a").style.display="inline-block",document.querySelector("#odo3a").style.display="inline-block",document.querySelector("#odo4a").style.display="inline-block",document.querySelector("#odo5a").style.display="inline-block",document.querySelector("#odo6a").style.display="inline-block",document.querySelector("#odo7a").style.display="inline-block",document.querySelector("#odo8a").style.display="inline-block",document.querySelector("#odo9a").style.display="inline-block",document.querySelector("#odo10a").style.display="inline-block",document.querySelector("#odo11a").style.display="inline-block",document.querySelector("#odo12a").style.display="inline-block",document.querySelector("#comma1a").style.display="inline-block",document.querySelector("#comma2a").style.display="inline-block",document.querySelector("#comma3a").style.display="inline-block"),e<1e10&&(m="1b",document.querySelector("#odo1a").style.display="none",document.querySelector("#odo2a").style.display="none",document.querySelector("#odo3a").style.display="inline-block",document.querySelector("#odo4a").style.display="inline-block",document.querySelector("#odo5a").style.display="inline-block",document.querySelector("#odo6a").style.display="inline-block",document.querySelector("#odo7a").style.display="inline-block",document.querySelector("#odo8a").style.display="inline-block",document.querySelector("#odo9a").style.display="inline-block",document.querySelector("#odo10a").style.display="inline-block",document.querySelector("#odo11a").style.display="inline-block",document.querySelector("#odo12a").style.display="inline-block",document.querySelector("#comma1a").style.display="inline-block",document.querySelector("#comma2a").style.display="inline-block",document.querySelector("#comma3a").style.display="inline-block"),e<1e9&&(m="100m",document.querySelector("#odo1a").style.display="none",document.querySelector("#odo2a").style.display="none",document.querySelector("#odo3a").style.display="none",document.querySelector("#odo4a").style.display="inline-block",document.querySelector("#odo5a").style.display="inline-block",document.querySelector("#odo6a").style.display="inline-block",document.querySelector("#odo7a").style.display="inline-block",document.querySelector("#odo8a").style.display="inline-block",document.querySelector("#odo9a").style.display="inline-block",document.querySelector("#odo10a").style.display="inline-block",document.querySelector("#odo11a").style.display="inline-block",document.querySelector("#odo12a").style.display="inline-block",document.querySelector("#comma1a").style.display="none",document.querySelector("#comma2a").style.display="inline-block",document.querySelector("#comma3a").style.display="inline-block"),e<1e8&&(m="10m",document.querySelector("#odo1a").style.display="none",document.querySelector("#odo2a").style.display="none",document.querySelector("#odo3a").style.display="none",document.querySelector("#odo4a").style.display="none",document.querySelector("#odo5a").style.display="inline-block",document.querySelector("#odo6a").style.display="inline-block",document.querySelector("#odo7a").style.display="inline-block",document.querySelector("#odo8a").style.display="inline-block",document.querySelector("#odo9a").style.display="inline-block",document.querySelector("#odo10a").style.display="inline-block",document.querySelector("#odo11a").style.display="inline-block",document.querySelector("#odo12a").style.display="inline-block",document.querySelector("#comma1a").style.display="none",document.querySelector("#comma2a").style.display="inline-block",document.querySelector("#comma3a").style.display="inline-block"),e<1e7&&(m="1m",document.querySelector("#odo1a").style.display="none",document.querySelector("#odo2a").style.display="none",document.querySelector("#odo3a").style.display="none",document.querySelector("#odo4a").style.display="none",document.querySelector("#odo5a").style.display="none",document.querySelector("#odo6a").style.display="inline-block",document.querySelector("#odo7a").style.display="inline-block",document.querySelector("#odo8a").style.display="inline-block",document.querySelector("#odo9a").style.display="inline-block",document.querySelector("#odo10a").style.display="inline-block",document.querySelector("#odo11a").style.display="inline-block",document.querySelector("#odo12a").style.display="inline-block",document.querySelector("#comma1a").style.display="none",document.querySelector("#comma2a").style.display="inline-block",document.querySelector("#comma3a").style.display="inline-block"),e<1e6&&(m="100k",document.querySelector("#odo1a").style.display="none",document.querySelector("#odo2a").style.display="none",document.querySelector("#odo3a").style.display="none",document.querySelector("#odo4a").style.display="none",document.querySelector("#odo5a").style.display="none",document.querySelector("#odo6a").style.display="none",document.querySelector("#odo7a").style.display="inline-block",document.querySelector("#odo8a").style.display="inline-block",document.querySelector("#odo9a").style.display="inline-block",document.querySelector("#odo10a").style.display="inline-block",document.querySelector("#odo11a").style.display="inline-block",document.querySelector("#odo12a").style.display="inline-block",document.querySelector("#comma1a").style.display="none",document.querySelector("#comma2a").style.display="none",document.querySelector("#comma3a").style.display="inline-block"),e<1e5&&(m="10k",document.querySelector("#odo1a").style.display="none",document.querySelector("#odo2a").style.display="none",document.querySelector("#odo3a").style.display="none",document.querySelector("#odo4a").style.display="none",document.querySelector("#odo5a").style.display="none",document.querySelector("#odo6a").style.display="none",document.querySelector("#odo7a").style.display="none",document.querySelector("#odo8a").style.display="inline-block",document.querySelector("#odo9a").style.display="inline-block",document.querySelector("#odo10a").style.display="inline-block",document.querySelector("#odo11a").style.display="inline-block",document.querySelector("#odo12a").style.display="inline-block",document.querySelector("#comma1a").style.display="none",document.querySelector("#comma2a").style.display="none",document.querySelector("#comma3a").style.display="inline-block"),e<1e4&&(m="1k",document.querySelector("#odo1a").style.display="none",document.querySelector("#odo2a").style.display="none",document.querySelector("#odo3a").style.display="none",document.querySelector("#odo4a").style.display="none",document.querySelector("#odo5a").style.display="none",document.querySelector("#odo6a").style.display="none",document.querySelector("#odo7a").style.display="none",document.querySelector("#odo8a").style.display="none",document.querySelector("#odo9a").style.display="inline-block",document.querySelector("#odo10a").style.display="inline-block",document.querySelector("#odo11a").style.display="inline-block",document.querySelector("#odo12a").style.display="inline-block",document.querySelector("#comma1a").style.display="none",document.querySelector("#comma2a").style.display="none",document.querySelector("#comma3a").style.display="inline-block"),e<1e3&&(m="100",document.querySelector("#odo1a").style.display="none",document.querySelector("#odo2a").style.display="none",document.querySelector("#odo3a").style.display="none",document.querySelector("#odo4a").style.display="none",document.querySelector("#odo5a").style.display="none",document.querySelector("#odo6a").style.display="none",document.querySelector("#odo7a").style.display="none",document.querySelector("#odo8a").style.display="none",document.querySelector("#odo9a").style.display="none",document.querySelector("#odo10a").style.display="inline-block",document.querySelector("#odo11a").style.display="inline-block",document.querySelector("#odo12a").style.display="inline-block",document.querySelector("#comma1a").style.display="none",document.querySelector("#comma2a").style.display="none",document.querySelector("#comma3a").style.display="none"),e<100&&(m="10",document.querySelector("#odo1a").style.display="none",document.querySelector("#odo2a").style.display="none",document.querySelector("#odo3a").style.display="none",document.querySelector("#odo4a").style.display="none",document.querySelector("#odo5a").style.display="none",document.querySelector("#odo6a").style.display="none",document.querySelector("#odo7a").style.display="none",document.querySelector("#odo8a").style.display="none",document.querySelector("#odo9a").style.display="none",document.querySelector("#odo10a").style.display="none",document.querySelector("#odo11a").style.display="inline-block",document.querySelector("#odo12a").style.display="inline-block",document.querySelector("#comma1a").style.display="none",document.querySelector("#comma2a").style.display="none",document.querySelector("#comma3a").style.display="none"),e<10&&(m="1",document.querySelector("#odo1a").style.display="none",document.querySelector("#odo2a").style.display="none",document.querySelector("#odo3a").style.display="none",document.querySelector("#odo4a").style.display="none",document.querySelector("#odo5a").style.display="none",document.querySelector("#odo6a").style.display="none",document.querySelector("#odo7a").style.display="none",document.querySelector("#odo8a").style.display="none",document.querySelector("#odo9a").style.display="none",document.querySelector("#odo10a").style.display="none",document.querySelector("#odo11a").style.display="none",document.querySelector("#odo12a").style.display="inline-block",document.querySelector("#comma1a").style.display="none",document.querySelector("#comma2a").style.display="none",document.querySelector("#comma3a").style.display="none"),m}function render(){settype(raw),"100b"==m&&(odo1a.innerHTML=cmm[0],odo2a.innerHTML=cmm[1],odo3a.innerHTML=cmm[2],odo4a.innerHTML=cmm[3],odo5a.innerHTML=cmm[4],odo6a.innerHTML=cmm[5],odo7a.innerHTML=cmm[6],odo8a.innerHTML=cmm[7],odo9a.innerHTML=cmm[8],odo10a.innerHTML=cmm[9],odo11a.innerHTML=cmm[10],odo12a.innerHTML=cmm[11]),"10b"==m&&(odo2a.innerHTML=cmm[0],odo3a.innerHTML=cmm[1],odo4a.innerHTML=cmm[2],odo5a.innerHTML=cmm[3],odo6a.innerHTML=cmm[4],odo7a.innerHTML=cmm[5],odo8a.innerHTML=cmm[6],odo9a.innerHTML=cmm[7],odo10a.innerHTML=cmm[8],odo11a.innerHTML=cmm[9],odo12a.innerHTML=cmm[10]),"1b"==m&&(odo3a.innerHTML=cmm[0],odo4a.innerHTML=cmm[1],odo5a.innerHTML=cmm[2],odo6a.innerHTML=cmm[3],odo7a.innerHTML=cmm[4],odo8a.innerHTML=cmm[5],odo9a.innerHTML=cmm[6],odo10a.innerHTML=cmm[7],odo11a.innerHTML=cmm[8],odo12a.innerHTML=cmm[9]),"100m"==m&&(odo4a.innerHTML=cmm[0],odo5a.innerHTML=cmm[1],odo6a.innerHTML=cmm[2],odo7a.innerHTML=cmm[3],odo8a.innerHTML=cmm[4],odo9a.innerHTML=cmm[5],odo10a.innerHTML=cmm[6],odo11a.innerHTML=cmm[7],odo12a.innerHTML=cmm[8]),"10m"==m&&(odo5a.innerHTML=cmm[0],odo6a.innerHTML=cmm[1],odo7a.innerHTML=cmm[2],odo8a.innerHTML=cmm[3],odo9a.innerHTML=cmm[4],odo10a.innerHTML=cmm[5],odo11a.innerHTML=cmm[6],odo12a.innerHTML=cmm[7]),"1m"==m&&(odo6a.innerHTML=cmm[0],odo7a.innerHTML=cmm[1],odo8a.innerHTML=cmm[2],odo9a.innerHTML=cmm[3],odo10a.innerHTML=cmm[4],odo11a.innerHTML=cmm[5],odo12a.innerHTML=cmm[6]),"100k"==m&&(odo7a.innerHTML=cmm[0],odo8a.innerHTML=cmm[1],odo9a.innerHTML=cmm[2],odo10a.innerHTML=cmm[3],odo11a.innerHTML=cmm[4],odo12a.innerHTML=cmm[5]),"10k"==m&&(odo8a.innerHTML=cmm[0],odo9a.innerHTML=cmm[1],odo10a.innerHTML=cmm[2],odo11a.innerHTML=cmm[3],odo12a.innerHTML=cmm[4]),"1k"==m&&(odo9a.innerHTML=cmm[0],odo10a.innerHTML=cmm[1],odo11a.innerHTML=cmm[2],odo12a.innerHTML=cmm[3]),"100"==m&&(odo10a.innerHTML=cmm[0],odo11a.innerHTML=cmm[1],odo12a.innerHTML=cmm[2]),"10"==m&&(odo11a.innerHTML=cmm[0],odo12a.innerHTML=cmm[1]),"1"==m&&(odo12a.innerHTML=cmm[0])}function openmenu(){"visible"==document.getElementById("settingsMenu").style.visibility?document.getElementById("settingsMenu").style.visibility="hidden":document.getElementById("settingsMenu").style.visibility="visible"}function submit(){if(document.getElementById("enabled").checked&&""!=document.getElementById("subscribers_input").value&&(user.count=parseFloat(document.getElementById("subscribers_input").value),cmm=spl(user.count),raw=user.count,render()),document.getElementById("file_input").files[0]){let e=document.getElementById("file_input").files[0],o=new FileReader;o.readAsDataURL(e),o.onload=function(){user.image=o.result},document.getElementById("image").src=user.image}else user.image=document.getElementById("image_input").value,document.getElementById("image").src=user.image;user.name=document.getElementById("name_input").value,document.getElementById("name").innerHTML=user.name,user.footer=document.getElementById("footer_input").value,document.getElementById("footer").innerHTML=user.footer}let interval;function update(){let e=random(user.min_gain,user.max_gain);user.count+=e,cmm=spl(user.count),raw=user.count,"live"==user.graphType&&(chart.series[0].data.length>user.maxPoints&&(chart.series[0].data[0].remove(),user.liveGraph.shift()),chart.series[0].addPoint([(new Date).getTime(),user.count]),user.liveGraph.push([(new Date).getTime(),user.count])),render()}function submit1(){user.updateInterval=1e3*document.getElementById("updateInterval").value,user.min_gain=parseFloat(document.getElementById("min_subs").value),user.max_gain=parseFloat(document.getElementById("max_subs").value),clearInterval(interval),interval=setInterval(update,user.updateInterval)}function submit2(){if("live"==document.getElementById("graph_type").value)user.graphType="live";else if("set"==document.getElementById("graph_type").value){user.graphType="set";let e=document.getElementById("graph_dates").value,o=document.getElementById("graph_values").value;user.graphDates=e.split(","),user.graphValues=o.split(",");let t=[];for(let e=0;e<user.graphDates.length;e++)user.graphDates[e]=user.graphDates[e],t[e]=new Date(user.graphDates[e]).getTime();for(let e=0;e<user.graphValues.length;e++)user.graphValues[e]=parseFloat(user.graphValues[e]);let n=[];for(let e=0;e<user.graphDates.length;e++)n.push([t[e],user.graphValues[e]]);console.log(n),chart.series[0].setData(n)}user.dropdownTopText=document.getElementById("dropdownTopText").value,user.dropdownBottomText=document.getElementById("dropdownBottomText").value,document.getElementById("dropdown-label1").innerHTML=user.dropdownTopText,document.getElementById("dropdown-label2").innerHTML=user.dropdownBottomText,user.maxPoints=""!=document.getElementById("maxPoints").value?parseFloat(document.getElementById("maxPoints").value):100}function random(e,o){return Math.floor(Math.random()*(o-e+1)+e)}function saveData(){localStorage.setItem("user",JSON.stringify(user)),alert("Saved!")}function exportData(){let e="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(user)),o=document.createElement("a");o.setAttribute("href",e),o.setAttribute("download","data.json"),o.click()}function toggleTheme(){const e=document.getElementById("themeStylesheet");"./style.css"===e.getAttribute("href")?e.setAttribute("href","./dark.css"):e.setAttribute("href","./style.css")}function clearChart(){chart.series[0].setData([])}document.getElementById("close").onclick=function(){document.getElementById("settingsMenu").style.visibility="hidden"},document.getElementById("file_input2").addEventListener("change",(function(e){importData()}));let importedChannels=[];function importData(){let e=document.getElementById("file_input2").files[0];if(e){let o=new FileReader;o.readAsText(e,"UTF-8"),o.onload=function(e){let o=JSON.parse(e.target.result);if(o.data)return importedChannels=o,void pickChannel(o);user=o,localStorage.setItem("user",JSON.stringify(user)),location.reload()},o.onerror=function(e){alert("error reading file")}}else alert("Please select a file")}function pickChannel(e){document.getElementById("settingsMenu").innerHTML="";for(let o=0;o<e.data.length;o++){let t=e.data[o];document.getElementById("settingsMenu").innerHTML+=`\n\t\t<div>\n\t\t<img src="${t.image}">\n\t\t<h1>${t.name}</h1>\n\t\t<h2>${t.count.toLocaleString()}</h2>\n\t\t<p>${t.id}</p>\n\t\t<button onclick="selectThing('${t.id}')">Select</button>\n\t\t<hr>\n\t\t</div><br>`}document.body.appendChild(div)}function selectThing(e){for(let o=0;o<importedChannels.data.length;o++)if(e==importedChannels.data[o].id){let e=importedChannels.data[o],t={name:e.name,count:e.count,image:e.image,min_gain:e.min_gain,max_gain:e.max_gain,mean_gain:e.mean_gain?e.mean_gain:0,std_gain:e.std_gain?e.std_gain:0,abbreviate:!!e.abbreviate&&e.abbreviate,id:e.id?e.id:uuidGen(),footer:e.footer?e.footer:"Subscribers",updateInterval:e.updateInterval?e.updateInterval:2e3,graphType:e.graphType?e.graphType:"live",graphDates:e.graphDates?e.graphDates:[],graphValues:e.graphValues?e.graphValues:[],liveGraph:e.liveGraph?e.liveGraph:[],maxPoints:e.maxPoints?e.maxPoints:1e3,dropdownTopText:e.dropdownTopText?e.dropdownTopText:"All Time",dropdownBottomText:e.dropdownBottomText?e.dropdownBottomText:"Live Data",banner:e.banner?e.banner:"",textColor:e.textColor?e.textColor:"#000",odometerUp:e.odometerUp?e.odometerUp:"#000",odometerDown:e.odometerDown?e.odometerDown:"#000",odometerSpeed:e.odometerSpeed?e.odometerSpeed:2,graphColor:e.graphColor?e.graphColor:"#000",boxColor:e.boxColor?e.boxColor:"#000",bgColor:e.bgColor?e.bgColor:"#000"};localStorage.setItem("user",JSON.stringify(t)),location.reload()}}function resetData(){confirm("Are you sure you want to reset all data? This cannot be undone.")&&(localStorage.clear(),location.reload())}localStorage.getItem("user")?(console.log(user),document.getElementById("subscribers_input").value=user.count,document.getElementById("name_input").value=user.name,document.getElementById("footer_input").value=user.footer,document.getElementById("image_input").value=user.image,document.getElementById("image").src=user.image,document.getElementById("min_subs").value=user.min_gain,document.getElementById("max_subs").value=user.max_gain,document.getElementById("updateInterval").value=user.updateInterval/1e3,document.getElementById("graph_type").value=user.graphType,document.getElementById("graph_dates").innerHTML=user.graphDates,document.getElementById("graph_values").innerHTML=user.graphValues,document.getElementById("dropdownTopText").value=user.dropdownTopText,document.getElementById("dropdownBottomText").value=user.dropdownBottomText,document.getElementById("maxPoints").value=user.maxPoints,submit(),submit1(),submit2()):render(),document.getElementById("autosave").onclick=function(){document.getElementById("autosave").checked?(saveInterval=setInterval((function(){localStorage.setItem("user",JSON.stringify(user))}),15e3),user.autosave=!0):(clearInterval(saveInterval),user.autosave=!1)},1==user.autosave&&(saveInterval=setInterval((function(){localStorage.setItem("user",JSON.stringify(user))}),15e3),document.getElementById("autosave").checked=!0);