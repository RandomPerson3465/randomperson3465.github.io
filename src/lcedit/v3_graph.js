var values=[],times=[];let labels=!1;var useTimes=!0,maxLabelsX=5,maxLabelsY=3,maxValues=500;let r=!1;var noDecimals=!0;const canvas=document.getElementById("canvas");if(canvas.getContext)var ctx=canvas.getContext("2d");const width=canvas.width,height=canvas.height;function formatTime(d,f){let a=new Date(d).getHours(),b=new Date(d).getMinutes(),c=new Date(d).getSeconds();"number"==typeof a&&a<10&&(a="0"+a.toString()),"number"==typeof b&&b<10&&(b="0"+b.toString()),"number"==typeof c&&c<10&&(c="0"+c.toString()),a=a.toString(),b=b.toString(),c=c.toString();let e=a+":"+b;return f&&(e+=":"+c),e}function addNext(){if(!submitted)return;values.push(nonNegOnly.checked&&count<0?0:count),times.push(Date.now()),values.length>maxValues&&removeOld.checked&&(values=values.slice(values.length-maxValues),times=times.slice(values.length-maxValues));let d=[],g=[];for(var h=0;h<maxLabelsX;h++)d.push(Math.round(h*values.length/maxLabelsX));var c=Math.max(...values)-Math.min(...values);if(c?r=!1:(c=1,r=!0),!canvas.hidden){ctx.clearRect(0,0,canvas.width,canvas.height);for(var b=0;b<maxLabelsY;b++)labels&&(g.push(b*c/maxLabelsY+Math.min(...values)),values.filter(a=>a.toString()===Math.round(a).toString()),noDecimals?(ctx.font="20px Serif",ctx.textAlign="right",ctx.fillStyle=night.checked?"#fff":"#000",ctx.fillText(Math.round(g[b]),width,height-b/maxLabelsY*height)):(ctx.font="20px Serif",ctx.textAlign="right",ctx.fillStyle=night.checked?"#fff":"#000",ctx.fillText(g[b].toFixed(4),width,height-b/maxLabelsY*height)),ctx.beginPath(),ctx.strokeStyle=night.checked?"#7f7f7f":"#4f4f4f",ctx.lineWidth=1,ctx.moveTo(0,b/maxLabelsY*height),ctx.lineTo(width,b/maxLabelsY*height),ctx.stroke());ctx.strokeStyle=night.checked?"#4babdb":"#6b0a0a",ctx.lineWidth=3,ctx.beginPath(),ctx.moveTo(0,height-(values[0]-Math.min(...values))*height/c);for(var a=2;a<=values.length;a++)values[a-1]>Number.MAX_VALUE&&(values[a-1]=Number.MAX_VALUE),values[a-1]< -Number.MAX_VALUE&&(values[a-1]=-Number.MAX_VALUE),isNaN(values[a-1])&&(values[a-1]=0),ctx.lineTo((a-1)/(values.length-1)*width,height-(values[a-1]-Math.min(...values))*height/c),ctx.stroke(),ctx.font="20px Serif",ctx.textAlign="center",ctx.fillStyle=night.checked?"#fff":"#000",labels&&((values.length<=maxLabelsX||d.includes(a-1))&&(useTimes?ctx.fillText(""+formatTime(times[a-1],!1),(a-1)/(values.length-1)*width,height-15,50):ctx.fillText((a-1).toString(),(a-1)/(values.length-1)*width,height-15,50)),ctx.moveTo((a-1)/(values.length-1)*width,height-(values[a-1]-Math.min(...values))*height/c));if(ctx.font="20px Serif",ctx.textAlign="right",ctx.fillStyle=night.checked?"#fff":"#000",labels){if(r?ctx.fillText(Math.floor(Math.max(...values)+1).toString(),width,25):ctx.fillText(Math.floor(Math.max(...values)).toString(),width,25),values.length>maxLabelsX)for(var e=1;e<=maxLabelsX;e++)ctx.beginPath(),ctx.strokeStyle=night.checked?"#7f7f7f":"#4f4f4f",ctx.lineWidth=1,ctx.moveTo(d[e-1]/(values.length-1)*width,0),ctx.lineTo(d[e-1]/(values.length-1)*width,height),ctx.stroke();else for(var f=2;f<=values.length;f++)ctx.beginPath(),ctx.strokeStyle=night.checked?"#7f7f7f":"#4f4f4f",ctx.lineWidth=1,ctx.moveTo((f-1)/(values.length-1)*width,0),ctx.lineTo((f-1)/(values.length-1)*width,height),ctx.stroke()}}}setInterval(addNext,2e3)